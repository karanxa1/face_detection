<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Human Detection App</title>
    <style>
        body { text-align: center; font-family: Arial, sans-serif; background-color: #f4f4f9; }
        .container { background: white; padding: 20px; border-radius: 10px; box-shadow: 0px 4px 8px rgba(0,0,0,0.1); width: 80%; margin: auto; }
        video, img { width: 100%; border-radius: 8px; }
        button { padding: 10px; font-size: 16px; margin: 10px; cursor: pointer; border: none; border-radius: 5px; background: #007bff; color: white; }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>

    <div class="container">
        <h1>Human Detection App</h1>

        <div>
            <button onclick="startWebcam()">Start Camera</button>
            <button onclick="stopWebcam()">Stop Camera</button>
        </div>

        <img id="video-feed" src="{{ url_for('video_feed') }}" alt="Live Video Stream">

        <h2>Upload Video</h2>
        <input type="file" id="video-upload" accept="video/*">
        <button onclick="uploadVideo()">Process Video</button>

        <h2>Processed Video</h2>
        <video id="processed-video" controls></video>
    </div>

    <script>
        let videoFeed = document.getElementById("video-feed");
        let processedVideo = document.getElementById("processed-video");
        let stream = null;

        function startWebcam() {
            videoFeed.src = "{{ url_for('video_feed') }}";
        }

        function stopWebcam() {
            videoFeed.src = "";
        }

        async function uploadVideo() {
            let fileInput = document.getElementById("video-upload");
            if (!fileInput.files.length) {
                alert("Please select a video file.");
                return;
            }

            let formData = new FormData();
            formData.append("video", fileInput.files[0]);

            let response = await fetch("/upload_video", { method: "POST", body: formData });
            let data = await response.json();

            if (data.processed_video) {
                processedVideo.src = "/" + data.processed_video;
            } else {
                alert("Video processing failed.");
            }
        }
    </script>

</body>
</html>
